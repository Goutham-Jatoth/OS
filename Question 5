5. Write C programs to illustrate the following IPC mechanisms a) Pipes b) FIFOs c) Message Queues
d) Shared Memory



üîÅ Inter-Process Communication (IPC) Programs
a) Pipes
Parent ‚Üí Child communication
#include <stdio.h>
#include <unistd.h>

int main() {
    int fd[2];
    char msg[] = "Hello from Parent";

    pipe(fd);

    if (fork() == 0) {
        // Child
        char buf[50];
        read(fd[0], buf, sizeof(buf));
        printf("Child received: %s\n", buf);
    } else {
        // Parent
        write(fd[1], msg, sizeof(msg));
    }

    return 0;
}

b) FIFOs (Named Pipes)
Run Writer first, then Reader
FIFO Writer
#include <stdio.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <unistd.h>

int main() {
    int fd;
    char msg[] = "Hello FIFO";

    mkfifo("myfifo", 0666);
    fd = open("myfifo", O_WRONLY);
    write(fd, msg, sizeof(msg));

    return 0;
}

FIFO Reader
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>

int main() {
    int fd;
    char buf[50];

    fd = open("myfifo", O_RDONLY);
    read(fd, buf, sizeof(buf));
    printf("Received: %s\n", buf);

    return 0;
}

c) Message Queues
Sender Program
#include <stdio.h>
#include <sys/ipc.h>
#include <sys/msg.h>

struct msgbuf {
    long mtype;
    char msg[50];
};

int main() {
    int msgid;
    struct msgbuf m;

    msgid = msgget(1234, 0666 | IPC_CREAT);

    m.mtype = 1;
    printf("Enter message: ");
    gets(m.msg);

    msgsnd(msgid, &m, sizeof(m.msg), 0);

    return 0;
}

Receiver Program
#include <stdio.h>
#include <sys/ipc.h>
#include <sys/msg.h>

struct msgbuf {
    long mtype;
    char msg[50];
};

int main() {
    int msgid;
    struct msgbuf m;

    msgid = msgget(1234, 0666 | IPC_CREAT);

    msgrcv(msgid, &m, sizeof(m.msg), 1, 0);
    printf("Received: %s\n", m.msg);

    return 0;
}

d) Shared Memory
Writer Program
#include <stdio.h>
#include <sys/shm.h>
#include <string.h>

int main() {
    int shmid;
    char *data;

    shmid = shmget(1234, 1024, 0666 | IPC_CREAT);
    data = (char *)shmat(shmid, NULL, 0);

    printf("Enter data: ");
    gets(data);

    return 0;
}

Reader Program
#include <stdio.h>
#include <sys/shm.h>

int main() {
    int shmid;
    char *data;

    shmid = shmget(1234, 1024, 0666 | IPC_CREAT);
    data = (char *)shmat(shmid, NULL, 0);

    printf("Data read: %s\n", data);

    return 0;
}

üß† Quick Viva Table
IPC Mechanism	Communication Type
Pipe	Parent ‚Üî Child
FIFO	Unrelated processes
Message Queue	Message-based
Shared Memory	Fastest IPC
‚úÖ If you want:

Single combined IPC program

Theory + diagrams

Compilation & execution steps

Simplified versions without gets()
